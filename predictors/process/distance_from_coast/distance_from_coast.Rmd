---
title: "R Notebook"
---

```{r}
library(terra)
```

```{r}
dep <- rast("../depth/inputs/BSBD_0.9.6_250m/BSBD_0.9.6_250m.tif")
grid <- rast("../../../grid/outputs/grid_marine_250m.tif")
dep <- project(dep, grid, method = "near")
dep[dep >= 0] <- 99
dep[dep < 0] <- 1
cd <- costDist(dep, target = 99)
cd[is.na(grid)] <- NA
cd <- round(cd, digits = 0)

writeRaster(cd, "outputs/distance_from_coast_250m.tif", overwrite = TRUE, 
            datatype = "FLT4S", gdal=c("COMPRESS=ZSTD", "PREDICTOR=2"))
plot(cd)
```
